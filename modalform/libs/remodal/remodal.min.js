!function(d,a){"function"==typeof define&&define.amd?define(["jquery"],function(b){return a(d,b)}):"object"==typeof exports?a(d,require("jquery")):a(d,d.jQuery||d.Zepto)}(this,function(y,z){"use strict";function b(i){if(u&&"none"===i.css("animation-name")&&"none"===i.css("-webkit-animation-name")&&"none"===i.css("-moz-animation-name")&&"none"===i.css("-o-animation-name")&&"none"===i.css("-ms-animation-name"))return 0;var a,j,k,l,m=i.css("animation-duration")||i.css("-webkit-animation-duration")||i.css("-moz-animation-duration")||i.css("-o-animation-duration")||i.css("-ms-animation-duration")||"0s",n=i.css("animation-delay")||i.css("-webkit-animation-delay")||i.css("-moz-animation-delay")||i.css("-o-animation-delay")||i.css("-ms-animation-delay")||"0s",o=i.css("animation-iteration-count")||i.css("-webkit-animation-iteration-count")||i.css("-moz-animation-iteration-count")||i.css("-o-animation-iteration-count")||i.css("-ms-animation-iteration-count")||"1";for(m=m.split(", "),n=n.split(", "),o=o.split(", "),l=0,j=m.length,a=Number.NEGATIVE_INFINITY;l<j;l++)k=parseFloat(m[l])*parseInt(o[l],10)+parseFloat(n[l]),k>a&&(a=k);return a}function A(){if(z(document.body).height()<=z(window).height())return 0;var b,f,g=document.createElement("div"),d=document.createElement("div");return g.style.visibility="hidden",g.style.width="100px",document.body.appendChild(g),b=g.offsetWidth,g.style.overflow="scroll",d.style.width="100%",g.appendChild(d),f=d.offsetWidth,g.parentNode.removeChild(g),b-f}function d(){if(!v){var b,d,g=z("html"),e=j("is-locked");g.hasClass(e)||(d=z(document.body),b=parseInt(d.css("padding-right"),10)+A(),d.css("padding-right",b+"px"),g.addClass(e))}}function e(){if(!v){var b,d,g=z("html"),e=j("is-locked");g.hasClass(e)&&(d=z(document.body),b=parseInt(d.css("padding-right"),10)-A(),d.css("padding-right",b+"px"),g.removeClass(e))}}function f(g,a,b,c){var d=j("is",a),e=[j("is",t.CLOSING),j("is",t.OPENING),j("is",t.CLOSED),j("is",t.OPENED)].join(" ");g.$bg.removeClass(e).addClass(d),g.$overlay.removeClass(e).addClass(d),g.$wrapper.removeClass(e).addClass(d),g.$modal.removeClass(e).addClass(d),g.state=a,b||g.$modal.trigger({type:a,reason:c},[{reason:c}])}function g(c,i,d){var e=0,j=function(b){b.target===this&&e++},g=function(b){b.target===this&&0==--e&&(z.each(["$bg","$overlay","$wrapper","$modal"],function(c,a){d[a].off(q+" "+r)}),i())};z.each(["$bg","$overlay","$wrapper","$modal"],function(c,a){d[a].on(q,j).on(r,g)}),c(),0===b(d.$bg)&&0===b(d.$overlay)&&0===b(d.$wrapper)&&0===b(d.$modal)&&(z.each(["$bg","$overlay","$wrapper","$modal"],function(c,a){d[a].off(q+" "+r)}),i())}function h(d){d.state!==t.CLOSED&&(z.each(["$bg","$overlay","$wrapper","$modal"],function(a,b){d[b].off(q+" "+r)}),d.$bg.removeClass(d.settings.modifier),d.$overlay.removeClass(d.settings.modifier).hide(),d.$wrapper.hide(),e(),f(d,t.CLOSED,!0))}function i(g){var h,i,j,k,l={};for(g=g.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,","),h=g.split(","),k=0,i=h.length;k<i;k++)h[k]=h[k].split(":"),j=h[k][1],("string"==typeof j||j instanceof String)&&(j="true"===j||"false"!==j&&j),("string"==typeof j||j instanceof String)&&(j=isNaN(j)?j:+j),l[h[k][0]]=j;return l}function j(){for(var c=p,d=0;d<arguments.length;++d)c+="-"+arguments[d];return c}function a(){var b,e,f=location.hash.replace("#","");if(f){try{e=z("[data-remodal-id=\""+f+"\"]")}catch(a){}e&&e.length&&(b=z[B].lookup[e.data(B)],b&&b.settings.hashTracking&&b.open())}else l&&l.state===t.OPENED&&l.settings.hashTracking&&l.close()}function k(b,a){var g=z(document.body),d=g,h=this;h.settings=z.extend({},s,a),h.index=z[B].lookup.push(h)-1,h.state=t.CLOSED,h.$overlay=z("."+j("overlay")),null!==h.settings.appendTo&&h.settings.appendTo.length&&(d=z(h.settings.appendTo)),h.$overlay.length||(h.$overlay=z("<div>").addClass(j("overlay")+" "+j("is",t.CLOSED)).hide(),d.append(h.$overlay)),h.$bg=z("."+j("bg")).addClass(j("is",t.CLOSED)),h.$modal=b.addClass(p+" "+j("is-initialized")+" "+h.settings.modifier+" "+j("is",t.CLOSED)).attr("tabindex","-1"),h.$wrapper=z("<div>").addClass(j("wrapper")+" "+h.settings.modifier+" "+j("is",t.CLOSED)).hide().append(h.$modal),d.append(h.$wrapper),h.$wrapper.on("click."+p,"[data-remodal-action=\"close\"]",function(b){b.preventDefault(),h.close()}),h.$wrapper.on("click."+p,"[data-remodal-action=\"cancel\"]",function(b){b.preventDefault(),h.$modal.trigger(c.CANCELLATION),h.settings.closeOnCancel&&h.close(c.CANCELLATION)}),h.$wrapper.on("click."+p,"[data-remodal-action=\"confirm\"]",function(b){b.preventDefault(),h.$modal.trigger(c.CONFIRMATION),h.settings.closeOnConfirm&&h.close(c.CONFIRMATION)}),h.$wrapper.on("click."+p,function(b){var a=z(b.target);a.hasClass(j("wrapper"))&&h.settings.closeOnOutsideClick&&h.close()})}var l,m,B="remodal",p=y.REMODAL_GLOBALS&&y.REMODAL_GLOBALS.NAMESPACE||"remodal",q=z.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(b){return b+"."+p}).join(" "),r=z.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(b){return b+"."+p}).join(" "),s=z.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:"",appendTo:null},y.REMODAL_GLOBALS&&y.REMODAL_GLOBALS.DEFAULTS),t={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},c={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"},u=function(){var b=document.createElement("div").style;return void 0!==b.animationName||void 0!==b.WebkitAnimationName||void 0!==b.MozAnimationName||void 0!==b.msAnimationName||void 0!==b.OAnimationName}(),v=/iPad|iPhone|iPod/.test(navigator.platform);k.prototype.open=function(){var b,e=this;e.state!==t.OPENING&&e.state!==t.CLOSING&&(b=e.$modal.attr("data-remodal-id"),b&&e.settings.hashTracking&&(m=z(window).scrollTop(),location.hash=b),l&&l!==e&&h(l),l=e,d(),e.$bg.addClass(e.settings.modifier),e.$overlay.addClass(e.settings.modifier).show(),e.$wrapper.show().scrollTop(0),e.$modal.focus(),g(function(){f(e,t.OPENING)},function(){f(e,t.OPENED)},e))},k.prototype.close=function(b){var a=this;a.state!==t.OPENING&&a.state!==t.CLOSING&&(a.settings.hashTracking&&a.$modal.attr("data-remodal-id")===location.hash.substr(1)&&(location.hash="",z(window).scrollTop(m)),g(function(){f(a,t.CLOSING,!1,b)},function(){a.$bg.removeClass(a.settings.modifier),a.$overlay.removeClass(a.settings.modifier).hide(),a.$wrapper.hide(),e(),f(a,t.CLOSED,!1,b)},a))},k.prototype.getState=function(){return this.state},k.prototype.destroy=function(){var b,d=z.remodal.lookup;h(this),this.$wrapper.remove(),delete d[this.index],b=z.grep(d,function(b){return!!b}).length,0===b&&(this.$overlay.remove(),this.$bg.removeClass(j("is",t.CLOSING)+" "+j("is",t.OPENING)+" "+j("is",t.CLOSED)+" "+j("is",t.OPENED)))},z.remodal={lookup:[]},z.fn.remodal=function(b){var a,g;return this.each(function(c,d){g=z(d),null==g.data("remodal")?(a=new k(g,b),g.data("remodal",a.index),a.settings.hashTracking&&g.attr("data-remodal-id")===location.hash.substr(1)&&a.open()):a=z.remodal.lookup[g.data("remodal")]}),a},z(document).ready(function(){z(document).on("click","[data-remodal-target]",function(b){b.preventDefault();var a=b.currentTarget,c=a.getAttribute("data-remodal-target"),d=z("[data-remodal-id=\""+c+"\"]");z.remodal.lookup[d.data("remodal")].open()}),z(document).find("."+p).each(function(b,a){var c=z(a),d=c.data("remodal-options");d?("string"==typeof d||d instanceof String)&&(d=i(d)):d={},c.remodal(d)}),z(document).on("keydown."+p,function(b){l&&l.settings.closeOnEscape&&l.state===t.OPENED&&27===b.keyCode&&l.close()}),z(window).on("hashchange."+p,a)})});